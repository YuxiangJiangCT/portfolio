import{j as t}from"./motion-vendor-CB9cult3.js";import{a as e}from"./react-vendor-4sRqKIl-.js";import{C as n,u as r,B as i,a as o,b as s,P as a,d as c,A as u,V as h}from"./three-vendor-D4yiv-1u.js";function l({count:n=25,connectionDistance:l=150}){const d=e.useRef(null),m=e.useRef(null),f=e.useRef({x:0,y:0}),{viewport:p,camera:w}=r(),g=e.useMemo(()=>{const t=new Float32Array(3*n),e=new Float32Array(3*n);for(let r=0;r<n;r++)t[3*r]=(Math.random()-.5)*p.width,t[3*r+1]=(Math.random()-.5)*p.height,t[3*r+2]=2*(Math.random()-.5),e[3*r]=.02*(Math.random()-.5),e[3*r+1]=.02*(Math.random()-.5),e[3*r+2]=.01*(Math.random()-.5);return{positions:t,velocities:e}},[n,p.width,p.height]),y=e.useMemo(()=>{const t=new i,e=new Float32Array(n*n*6);return t.setAttribute("position",new o(e,3)),t},[n]);return e.useEffect(()=>{const t=t=>{f.current={x:t.clientX/window.innerWidth*2-1,y:-t.clientY/window.innerHeight*2+1}};return window.addEventListener("mousemove",t),()=>window.removeEventListener("mousemove",t)},[]),s((t,e)=>{if(!d.current||!m.current)return;const r=d.current.geometry.attributes.position.array,i=m.current.geometry.attributes.position.array;let o=0;for(let s=0;s<n;s++){const t=3*s;r[t]+=60*g.velocities[t]*e,r[t+1]+=60*g.velocities[t+1]*e,r[t+2]+=60*g.velocities[t+2]*e;const a=new h(f.current.x*p.width/2,f.current.y*p.height/2,0),c=new h(r[t],r[t+1],r[t+2]),u=c.distanceTo(a);if(u<2){const e=c.sub(a).normalize().multiplyScalar(.02);r[t]+=e.x*(2-u),r[t+1]+=e.y*(2-u)}Math.abs(r[t])>p.width/2&&(g.velocities[t]*=-1,r[t]=Math.sign(r[t])*p.width/2),Math.abs(r[t+1])>p.height/2&&(g.velocities[t+1]*=-1,r[t+1]=Math.sign(r[t+1])*p.height/2),Math.abs(r[t+2])>2&&(g.velocities[t+2]*=-1,r[t+2]=2*Math.sign(r[t+2]));for(let e=s+1;e<n;e++){const n=3*e,s=r[t]-r[n],a=r[t+1]-r[n+1],c=r[t+2]-r[n+2];100*Math.sqrt(s*s+a*a+c*c)<l&&(i[o++]=r[t],i[o++]=r[t+1],i[o++]=r[t+2],i[o++]=r[n],i[o++]=r[n+1],i[o++]=r[n+2])}}d.current.geometry.attributes.position.needsUpdate=!0,m.current.geometry.setDrawRange(0,o/3),m.current.geometry.attributes.position.needsUpdate=!0}),t.jsxs(t.Fragment,{children:[t.jsxs(a,{ref:d,children:[t.jsx("bufferGeometry",{children:t.jsx("bufferAttribute",{attach:"attributes-position",count:n,array:g.positions,itemSize:3})}),t.jsx(c,{size:8,color:"#00ffff",transparent:!0,opacity:.8,sizeAttenuation:!0,depthWrite:!1,blending:u})]}),t.jsx("lineSegments",{ref:m,geometry:y,children:t.jsx("lineBasicMaterial",{color:"#00ffff",transparent:!0,opacity:.3,depthWrite:!1,linewidth:2})})]})}function d({count:e,connectionDistance:r}){return t.jsx("div",{className:"absolute inset-0 z-0",style:{background:"rgba(0, 255, 255, 0.05)"},children:t.jsx(n,{camera:{position:[0,0,5],fov:50},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},dpr:[1,2],children:t.jsx(l,{count:e,connectionDistance:r})})})}export{d as ParticleNetwork,d as default};
